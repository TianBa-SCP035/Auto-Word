var we=Object.defineProperty,$e=Object.defineProperties;var ke=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;var ce=(s,o,n)=>o in s?we(s,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[o]=n,z=(s,o)=>{for(var n in o||(o={}))de.call(o,n)&&ce(s,n,o[n]);if(Y)for(var n of Y(o))ue.call(o,n)&&ce(s,n,o[n]);return s},U=(s,o)=>$e(s,ke(o));var H=(s,o)=>{var n={};for(var a in s)de.call(s,a)&&o.indexOf(a)<0&&(n[a]=s[a]);if(s!=null&&Y)for(var a of Y(s))o.indexOf(a)<0&&ue.call(s,a)&&(n[a]=s[a]);return n};var Z=(s,o,n)=>new Promise((a,l)=>{var r=g=>{try{c(n.next(g))}catch(d){l(d)}},t=g=>{try{c(n.throw(g))}catch(d){l(d)}},c=g=>g.done?a(g.value):Promise.resolve(g.value).then(r,t);c((n=n.apply(s,o)).next())});import{d as Ce,S as he,H as Pe,N as Le,I as Be,K as Se,L as Te,w as Re,O as xe,P as ye,U as Me,X as Ae,J as Ee,Y as Ie,Z as De,G as Ve,$ as v,t as ze,n as ve,a0 as Fe,a1 as Oe,_ as j,a2 as Ne,a3 as fe,a4 as We,a5 as G,a6 as qe,e as Ue,a7 as je,B as Ke,a8 as Xe,a9 as Qe}from"./bootstrap-DWRgxUs4.js";import{a4 as $,aa as b,ab as f,a7 as e,af as se,ag as ae,ac as p,a8 as k,av as T,J as M,P as W,x as y,aq as L,aw as X,ad as le,aW as K,bz as N,aV as F,ai as D,aj as P,a_ as ee,a$ as be,T as _e,Y as Ge,ao as Je,bK as Ye,b6 as pe,k as J,aB as B,ah as te,n as He,a as Ze,bL as et,a9 as tt,Q as ot}from"../jse/index-index-CnMwTtSj.js";import{T as nt}from"./auth-title-BXxF3Bb8.js";import{C as st,X as at,u as lt,R as it,M as rt,a as ct,b as dt,c as ut}from"./use-modal-CE1HoS6p.js";import{C as ft,a as pt,u as mt,s as oe,b as gt}from"./use-vben-form-B20lk9tE.js";import{_ as me}from"./render-content.vue_vue_type_script_lang-C3FG54Sd.js";const ht=Ce("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),yt=$({__name:"AlertDialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean}},emits:["update:open"],setup(s,{emit:o}){const l=he(s,o);return(r,t)=>(f(),b(e(Pe),se(ae(e(l))),{default:p(()=>[k(r.$slots,"default")]),_:3},16))}}),vt=$({__name:"AlertDialogAction",props:{asChild:{type:Boolean},as:{}},setup(s){const o=s;return(n,a)=>(f(),b(e(Le),se(ae(o)),{default:p(()=>[k(n.$slots,"default")]),_:3},16))}}),ge=$({__name:"AlertDialogCancel",props:{asChild:{type:Boolean},as:{}},setup(s){const o=s;return(n,a)=>(f(),b(e(Be),se(ae(o)),{default:p(()=>[k(n.$slots,"default")]),_:3},16))}}),bt={class:"bg-overlay z-popup inset-0"},_t=$({__name:"AlertDialogOverlay",setup(s){return Se(),(o,n)=>(f(),T("div",bt))}}),wt=$({__name:"AlertDialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},centered:{type:Boolean},class:{},modal:{type:Boolean,default:!0},open:{type:Boolean},overlayBlur:{},zIndex:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus","close","closed","opened"],setup(s,{expose:o,emit:n}){const a=s,l=n,r=M(()=>{const u=a,{class:d,modal:h,open:C}=u;return H(u,["class","modal","open"])}),t=he(r,l),c=W(null);function g(d){var h;d.target===((h=c.value)==null?void 0:h.$el)&&(a.open?l("opened"):l("closed"))}return o({getContentRef:()=>c.value}),(d,h)=>(f(),b(e(Te),null,{default:p(()=>[y(Re,{name:"fade",appear:""},{default:p(()=>[d.open&&d.modal?(f(),b(_t,{key:0,style:X(U(z({},d.zIndex?{zIndex:d.zIndex}:{}),{position:"fixed",backdropFilter:d.overlayBlur&&d.overlayBlur>0?`blur(${d.overlayBlur}px)`:"none"})),onClick:h[0]||(h[0]=()=>l("close"))},null,8,["style"])):L("",!0)]),_:1}),y(e(xe),le({ref_key:"contentRef",ref:c,style:U(z({},d.zIndex?{zIndex:d.zIndex}:{}),{position:"fixed"}),onAnimationend:g},e(t),{class:e(K)("z-popup bg-background p-6 shadow-lg outline-none sm:rounded-xl","data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95",{"data-[state=open]:slide-in-from-top-[48%] data-[state=closed]:slide-out-to-top-[48%]":!d.centered,"data-[state=open]:slide-in-from-top-[98%] data-[state=closed]:slide-out-to-top-[148%]":d.centered,"top-[10vh]":!d.centered,"top-1/2 -translate-y-1/2":d.centered},a.class)}),{default:p(()=>[k(d.$slots,"default")]),_:3},16,["style","class"])]),_:3}))}}),$t=$({__name:"AlertDialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const o=s,n=M(()=>{const t=o,{class:l}=t;return H(t,["class"])}),a=ye(n);return(l,r)=>(f(),b(e(Me),le(e(a),{class:e(K)("text-muted-foreground text-sm",o.class)}),{default:p(()=>[k(l.$slots,"default")]),_:3},16,["class"]))}}),kt=$({__name:"AlertDialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const o=s,n=M(()=>{const t=o,{class:l}=t;return H(t,["class"])}),a=ye(n);return(l,r)=>(f(),b(e(Ae),le(e(a),{class:e(K)("text-lg font-semibold leading-none tracking-tight",o.class)}),{default:p(()=>[k(l.$slots,"default")]),_:3},16,["class"]))}}),Ct=$({__name:"spine-text",props:{animationDuration:{default:2},animationIterationCount:{default:"infinite"}},setup(s){const o=M(()=>({animation:`shine ${s.animationDuration}s linear ${s.animationIterationCount}`}));return(n,a)=>(f(),T("div",{style:X(o.value),class:"vben-spine-text !bg-clip-text text-transparent"},[k(n.$slots,"default")],4))}}),Pt=$({__name:"slider-captcha-action",props:{actionStyle:{},isPassing:{type:Boolean},toLeft:{type:Boolean}},setup(s,{expose:o}){const n=s,a=N("actionRef"),l=W("0"),r=M(()=>{const{actionStyle:c}=n;return U(z({},c),{left:l.value})}),t=M(()=>Number.parseInt(l.value)>10&&!n.isPassing);return o({getEl:()=>a.value,getStyle:()=>{var c;return(c=a==null?void 0:a.value)==null?void 0:c.style},setLeft:c=>{l.value=c}}),(c,g)=>(f(),T("div",{ref_key:"actionRef",ref:a,class:F([{"transition-width !left-0 duration-300":c.toLeft,"rounded-md":t.value},"bg-background dark:bg-accent absolute left-0 top-0 flex h-full cursor-move items-center justify-center px-3.5 shadow-md"]),style:X(r.value),name:"captcha-action"},[y(e(Ee),{"is-passing":c.isPassing,class:"text-foreground/60 size-4"},{default:p(()=>[k(c.$slots,"icon",{},()=>[c.isPassing?(f(),b(e(De),{key:1})):(f(),b(e(Ie),{key:0}))])]),_:3},8,["is-passing"])],6))}}),Lt=$({__name:"slider-captcha-bar",props:{barStyle:{},toLeft:{type:Boolean}},setup(s,{expose:o}){const n=s,a=N("barRef"),l=W("0"),r=M(()=>{const{barStyle:t}=n;return U(z({},t),{width:l.value})});return o({getEl:()=>a.value,setWidth:t=>{l.value=t}}),(t,c)=>(f(),T("div",{ref_key:"barRef",ref:a,class:F([t.toLeft&&"transition-width !w-0 duration-300","bg-success absolute h-full"]),style:X(r.value)},null,6))}}),Bt=$({__name:"slider-captcha-content",props:{contentStyle:{},isPassing:{type:Boolean},successText:{},text:{}},setup(s,{expose:o}){const n=s,a=N("contentRef"),l=M(()=>{const{contentStyle:r}=n;return z({},r)});return o({getEl:()=>a.value}),(r,t)=>(f(),T("div",{ref_key:"contentRef",ref:a,class:F([{[r.$style.success]:r.isPassing},"absolute top-0 flex size-full select-none items-center justify-center text-xs"]),style:X(l.value)},[k(r.$slots,"text",{},()=>[y(e(Ct),{class:"flex h-full items-center"},{default:p(()=>[D(P(r.isPassing?r.successText:r.text),1)]),_:1})])],6))}}),St="_success_fwxn1_2",Tt={success:St},Rt={$style:Tt},xt=Ve(Bt,[["__cssModules",Rt]]),Mt=$({__name:"index",props:ee({class:{},actionStyle:{default:()=>({})},barStyle:{default:()=>({})},contentStyle:{default:()=>({})},wrapperStyle:{default:()=>({})},isSlot:{type:Boolean,default:!1},successText:{default:""},text:{default:""}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:ee(["end","move","start","success"],["update:modelValue"]),setup(s,{expose:o,emit:n}){const a=s,l=n,r=be(s,"modelValue"),t=_e({endTime:0,isMoving:!1,isPassing:!1,moveDistance:0,startTime:0,toLeft:!1});o({resume:m});const c=N("wrapperRef"),g=N("barRef"),d=N("contentRef"),h=N("actionRef");Ge(()=>t.isPassing,i=>{if(i){const{endTime:S,startTime:x}=t,A=(S-x)/1e3;l("success",{isPassing:i,time:A.toFixed(1)}),r.value=i}}),Je(()=>{t.isPassing=!!r.value});function C(i){return"pageX"in i?i.pageX:"touches"in i&&i.touches[0]?i.touches[0].pageX:0}function R(i){t.isPassing||h.value&&(l("start",i),t.moveDistance=C(i)-Number.parseInt(h.value.getStyle().left.replace("px","")||"0",10),t.startTime=Date.now(),t.isMoving=!0)}function u(i){var E,I,O;const S=(I=(E=c.value)==null?void 0:E.offsetWidth)!=null?I:220,x=(O=i==null?void 0:i.offsetWidth)!=null?O:40,A=S-x-6;return{actionWidth:x,offset:A,wrapperWidth:S}}function _(i){const{isMoving:S,moveDistance:x}=t;if(S){const A=e(h),E=e(g);if(!A||!E)return;const{actionWidth:I,offset:O,wrapperWidth:Q}=u(A.getEl()),V=C(i)-x;l("move",{event:i,moveDistance:x,moveX:V}),V>0&&V<=O?(A.setLeft(`${V}px`),E.setWidth(`${V+I/2}px`)):V>O&&(A.setLeft(`${Q-I}px`),E.setWidth(`${Q-I/2}px`),a.isSlot||q())}}function w(i){const{isMoving:S,isPassing:x,moveDistance:A}=t;if(S&&!x){l("end",i);const E=h.value,I=e(g);if(!E||!I)return;const O=C(i)-A,{actionWidth:Q,offset:V,wrapperWidth:ie}=u(E.getEl());O<V?a.isSlot?setTimeout(()=>{if(r.value){const re=e(d);re&&(re.getEl().style.width=`${Number.parseInt(I.getEl().style.width)}px`)}else m()},0):m():(E.setLeft(`${ie-Q}px`),I.setWidth(`${ie-Q/2}px`),q()),t.isMoving=!1}}function q(){if(a.isSlot){m();return}t.endTime=Date.now(),t.isPassing=!0,t.isMoving=!1}function m(){t.isMoving=!1,t.isPassing=!1,t.moveDistance=0,t.toLeft=!1,t.startTime=0,t.endTime=0;const i=e(h),S=e(g),x=e(d);!i||!S||!x||(x.getEl().style.width="100%",t.toLeft=!0,Ye(()=>{t.toLeft=!1,i.setLeft("0"),S.setWidth("0")},300))}return(i,S)=>(f(),T("div",{ref_key:"wrapperRef",ref:c,class:F(e(K)("border-border bg-background-deep relative flex h-10 w-full items-center overflow-hidden rounded-md border text-center",a.class)),style:X(i.wrapperStyle),onMouseleave:w,onMousemove:_,onMouseup:w,onTouchend:w,onTouchmove:_},[y(Lt,{ref_key:"barRef",ref:g,"bar-style":i.barStyle,"to-left":t.toLeft},null,8,["bar-style","to-left"]),y(xt,{ref_key:"contentRef",ref:d,"content-style":i.contentStyle,"is-passing":t.isPassing,"success-text":i.successText||e(v)("ui.captcha.sliderSuccessText"),text:i.text||e(v)("ui.captcha.sliderDefaultText")},pe({_:2},[i.$slots.text?{name:"text",fn:p(()=>[k(i.$slots,"text",{isPassing:t.isPassing})]),key:"0"}:void 0]),1032,["content-style","is-passing","success-text","text"]),y(Pt,{ref_key:"actionRef",ref:h,"action-style":i.actionStyle,"is-passing":t.isPassing,"to-left":t.toLeft,onMousedown:R,onTouchstart:R},pe({_:2},[i.$slots.actionIcon?{name:"icon",fn:p(()=>[k(i.$slots,"actionIcon",{isPassing:t.isPassing})]),key:"0"}:void 0]),1032,["action-style","is-passing","to-left"])],38))}}),[lo,At]=ze("VbenAlertContext"),Et={class:"flex items-center"},It={class:"flex-auto"},Dt={class:"m-4 min-h-[30px]"},Vt=$({__name:"alert",props:ee({beforeClose:{},bordered:{type:Boolean,default:!0},buttonAlign:{default:"end"},cancelText:{},centered:{type:Boolean,default:!0},confirmText:{},containerClass:{},content:{},contentClass:{},contentMasking:{type:Boolean},footer:{},icon:{},overlayBlur:{},showCancel:{type:Boolean},title:{}},{open:{type:Boolean,default:!1},openModifiers:{}}),emits:ee(["closed","confirm","opened"],["update:open"]),setup(s,{emit:o}){const n=s,a=o,l=be(s,"open"),{$t:r}=ve(),t=Fe.getComponents(),c=W(!1);function g(){a("closed",c.value),c.value=!1}function d(){c.value=!1}const h=M(()=>{var i;let m=null;if(n.icon){if(typeof n.icon=="string")switch(n.icon){case"error":{m=J(Oe,{style:{color:"hsl(var(--destructive))"}});break}case"info":{m=J(ht,{style:{color:"hsl(var(--info))"}});break}case"question":{m=pt;break}case"success":{m=J(st,{style:{color:"hsl(var(--success))"}});break}case"warning":{m=J(ft,{style:{color:"hsl(var(--warning))"}});break}default:{m=null;break}}}else m=(i=n.icon)!=null?i:null;return m});function C(){_(),q(!1)}function R(){u(),q(!1)}At({doCancel:C,doConfirm:R});function u(){c.value=!0,a("confirm")}function _(){c.value=!1}const w=W(!1);function q(m){return Z(this,null,function*(){if(yield He(),!m&&n.beforeClose){w.value=!0;try{(yield n.beforeClose({isConfirm:c.value}))!==!1&&(l.value=!1)}finally{w.value=!1}}else l.value=m})}return(m,i)=>(f(),b(e(yt),{open:l.value,"onUpdate:open":q},{default:p(()=>[y(e(wt),{open:l.value,centered:m.centered,"overlay-blur":m.overlayBlur,onOpened:i[0]||(i[0]=S=>a("opened")),onClosed:g,onEscapeKeyDown:d,class:F(e(K)(m.containerClass,"left-0 right-0 mx-auto flex max-h-[80%] flex-col p-0 duration-300 sm:w-[520px] sm:max-w-[80%] sm:rounded-[var(--radius)]",{"border-border border":m.bordered,"shadow-3xl":!m.bordered}))},{default:p(()=>[B("div",{class:F(e(K)("relative flex-1 overflow-y-auto p-3",m.contentClass))},[m.title?(f(),b(e(kt),{key:0},{default:p(()=>[B("div",Et,[(f(),b(te(h.value),{class:"mr-2"})),B("span",It,P(e(r)(m.title)),1),m.showCancel?(f(),b(e(ge),{key:0,"as-child":""},{default:p(()=>[y(e(j),{variant:"ghost",size:"icon",class:"rounded-full",disabled:w.value,onClick:_},{default:p(()=>[y(e(at),{class:"text-muted-foreground size-4"})]),_:1},8,["disabled"])]),_:1})):L("",!0)])]),_:1})):L("",!0),y(e($t),null,{default:p(()=>[B("div",Dt,[y(e(me),{content:m.content,"render-br":""},null,8,["content"])]),w.value&&m.contentMasking?(f(),b(e(Ne),{key:0,spinning:w.value},null,8,["spinning"])):L("",!0)]),_:1}),B("div",{class:F(["flex items-center justify-end gap-x-2",`justify-${m.buttonAlign}`])},[y(e(me),{content:m.footer},null,8,["content"]),m.showCancel?(f(),b(e(ge),{key:0,"as-child":""},{default:p(()=>[(f(),b(te(e(t).DefaultButton||e(j)),{disabled:w.value,variant:"ghost",onClick:_},{default:p(()=>[D(P(m.cancelText||e(r)("cancel")),1)]),_:1},8,["disabled"]))]),_:1})):L("",!0),y(e(vt),{"as-child":""},{default:p(()=>[(f(),b(te(e(t).PrimaryButton||e(j)),{loading:w.value,onClick:u},{default:p(()=>[D(P(m.confirmText||e(r)("confirm")),1)]),_:1},8,["loading"]))]),_:1})],2)],2)]),_:1},8,["open","centered","overlay-blur","class"])]),_:1},8,["open"]))}}),ne=W([]),{$t:zt}=ve();function Ft(s,o,n){return new Promise((a,l)=>{var h,C;const r=Ze(s)?{content:s}:z({},s),t=document.createElement("div");document.body.append(t);const c={container:t,instance:null},g=U(z({onClosed:R=>{ne.value=ne.value.filter(u=>u!==c),fe(null,t),t.parentNode&&t.remove(),R?a():l(new Error("dialog cancelled"))}},r),{open:!0,title:(h=r.title)!=null?h:zt.value("prompt")}),d=J(Vt,g);fe(d,t),c.instance=(C=d.component)==null?void 0:C.proxy,ne.value.push(c)})}const Ot=$({__name:"dingding-login",props:{clientId:{},corpId:{},redirectUri:{},isQrCode:{type:Boolean}},setup(s){const o=s,n=We(),[a,l]=lt({header:!1,footer:!1,fullscreenButton:!1,class:"w-[302px] h-[302px] dingding-qrcode-login-modal",onOpened(){t()}}),r=()=>{const{redirectUri:g}=o;return g||window.location.origin+n.fullPath},t=()=>Z(null,null,function*(){const{clientId:g,corpId:d}=o;window.DTFrameLogin||(yield et("https://g.alicdn.com/dingding/h5-dingtalk-login/0.21.0/ddlogin.js")),window.DTFrameLogin({id:"dingding_qrcode_login_element",width:300,height:300},{redirect_uri:encodeURIComponent(r()),client_id:g,scope:"openid corpid",response_type:"code",state:"1",prompt:"consent",corpId:d},h=>{const{redirectUrl:C}=h;window.location.href=C},h=>{Ft(`Login Error: ${h}`)})}),c=()=>{const{clientId:g,corpId:d,isQrCode:h}=o;h?l.open():window.location.href=`https://login.dingtalk.com/oauth2/auth?redirect_uri=${encodeURIComponent(r())}&response_type=code&client_id=${g}&scope=openid&corpid=${d}&prompt=consent`};return(g,d)=>(f(),T("div",null,[y(e(G),{onClick:c,tooltip:e(v)("authentication.dingdingLogin"),"tooltip-side":"top"},{default:p(()=>[y(e(it))]),_:1},8,["tooltip"]),y(e(a),null,{default:p(()=>d[0]||(d[0]=[B("div",{id:"dingding_qrcode_login_element"},null,-1)])),_:1,__:[0]})]))}}),Nt={class:"w-full sm:mx-auto md:max-w-md"},Wt={class:"mt-4 flex items-center justify-between"},qt={class:"text-muted-foreground text-center text-xs uppercase"},Ut={class:"mt-4 flex flex-wrap justify-center"},jt=$({name:"ThirdPartyLogin",__name:"third-party-login",setup(s){const{auth:{dingding:o}}=qe();return(n,a)=>(f(),T("div",Nt,[B("div",Wt,[a[0]||(a[0]=B("span",{class:"border-input w-[35%] border-b dark:border-gray-600"},null,-1)),B("span",qt,P(e(v)("authentication.thirdPartyLogin")),1),a[1]||(a[1]=B("span",{class:"border-input w-[35%] border-b dark:border-gray-600"},null,-1))]),B("div",Ut,[y(e(G),{tooltip:e(v)("authentication.wechatLogin"),"tooltip-side":"top",class:"mb-3"},{default:p(()=>[y(e(rt))]),_:1},8,["tooltip"]),y(e(G),{tooltip:e(v)("authentication.qqLogin"),"tooltip-side":"top",class:"mb-3"},{default:p(()=>[y(e(ct))]),_:1},8,["tooltip"]),y(e(G),{tooltip:e(v)("authentication.githubLogin"),"tooltip-side":"top",class:"mb-3"},{default:p(()=>[y(e(dt))]),_:1},8,["tooltip"]),y(e(G),{tooltip:e(v)("authentication.googleLogin"),"tooltip-side":"top",class:"mb-3"},{default:p(()=>[y(e(ut))]),_:1},8,["tooltip"]),e(o)?(f(),b(Ot,{key:0,"corp-id":e(o).corpId,"client-id":e(o).clientId,class:"mb-3"},null,8,["corp-id","client-id"])):L("",!0)])]))}}),Kt=["onKeydown"],Xt={class:"text-muted-foreground"},Qt={key:0,class:"mb-6 flex justify-between"},Gt={class:"flex-center"},Jt={key:1,class:"mb-2 mt-4 flex items-center justify-between"},Yt={key:0,class:"mt-3 text-center text-sm"},Ht=$({name:"AuthenticationLogin",__name:"login",props:{formSchema:{default:()=>[]},codeLoginPath:{default:"/auth/code-login"},forgetPasswordPath:{default:"/auth/forget-password"},loading:{type:Boolean,default:!1},qrCodeLoginPath:{default:"/auth/qrcode-login"},registerPath:{default:"/auth/register"},showCodeLogin:{type:Boolean,default:!0},showForgetPassword:{type:Boolean,default:!0},showQrcodeLogin:{type:Boolean,default:!0},showRegister:{type:Boolean,default:!0},showRememberMe:{type:Boolean,default:!0},showThirdPartyLogin:{type:Boolean,default:!0},subTitle:{default:""},title:{default:""},submitButtonText:{default:""}},emits:["submit"],setup(s,{expose:o,emit:n}){const a=s,l=n,[r,t]=mt(_e({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:M(()=>a.formSchema),showDefaultActions:!1})),c=Ue(),g=`REMEMBER_ME_USERNAME_${location.hostname}`,d=localStorage.getItem(g)||"",h=W(!!d);function C(){return Z(this,null,function*(){const{valid:u}=yield t.validate(),_=yield t.getValues();u&&(localStorage.setItem(g,h.value?_==null?void 0:_.username:""),l("submit",_))})}function R(u){c.push(u)}return tt(()=>{d&&t.setFieldValue("username",d)}),o({getFormApi:()=>t}),(u,_)=>(f(),T("div",{onKeydown:Ke(Xe(C,["prevent"]),["enter"])},[k(u.$slots,"title",{},()=>[y(nt,null,{desc:p(()=>[B("span",Xt,[k(u.$slots,"subTitle",{},()=>[D(P(u.subTitle||e(v)("authentication.loginSubtitle")),1)])])]),default:p(()=>[k(u.$slots,"title",{},()=>[D(P(u.title||`${e(v)("authentication.welcomeBack")} 👋🏻`),1)])]),_:3})]),y(e(r)),u.showRememberMe||u.showForgetPassword?(f(),T("div",Qt,[B("div",Gt,[u.showRememberMe?(f(),b(e(je),{key:0,checked:h.value,"onUpdate:checked":_[0]||(_[0]=w=>h.value=w),name:"rememberMe"},{default:p(()=>[D(P(e(v)("authentication.rememberMe")),1)]),_:1},8,["checked"])):L("",!0)]),u.showForgetPassword?(f(),T("span",{key:0,class:"vben-link text-sm font-normal",onClick:_[1]||(_[1]=w=>R(u.forgetPasswordPath))},P(e(v)("authentication.forgetPassword")),1)):L("",!0)])):L("",!0),y(e(j),{class:F([{"cursor-wait":u.loading},"w-full"]),loading:u.loading,"aria-label":"login",onClick:C},{default:p(()=>[D(P(u.submitButtonText||e(v)("common.login")),1)]),_:1},8,["class","loading"]),u.showCodeLogin||u.showQrcodeLogin?(f(),T("div",Jt,[u.showCodeLogin?(f(),b(e(j),{key:0,class:"w-1/2",variant:"outline",onClick:_[2]||(_[2]=w=>R(u.codeLoginPath))},{default:p(()=>[D(P(e(v)("authentication.mobileLogin")),1)]),_:1})):L("",!0),u.showQrcodeLogin?(f(),b(e(j),{key:1,class:"ml-4 w-1/2",variant:"outline",onClick:_[3]||(_[3]=w=>R(u.qrCodeLoginPath))},{default:p(()=>[D(P(e(v)("authentication.qrcodeLogin")),1)]),_:1})):L("",!0)])):L("",!0),k(u.$slots,"third-party-login",{},()=>[u.showThirdPartyLogin?(f(),b(jt,{key:0})):L("",!0)]),k(u.$slots,"to-register",{},()=>[u.showRegister?(f(),T("div",Yt,[D(P(e(v)("authentication.accountTip"))+" ",1),B("span",{class:"vben-link text-sm font-normal",onClick:_[4]||(_[4]=w=>R(u.registerPath))},P(e(v)("authentication.createAccount")),1)])):L("",!0)])],40,Kt))}}),io=$({name:"Login",__name:"login",setup(s){const o=Qe(),n=[{label:"Super",value:"vben"},{label:"Admin",value:"admin"},{label:"User",value:"jack"}],a=M(()=>[{component:"VbenSelect",componentProps:{options:n,placeholder:v("authentication.selectAccount")},fieldName:"selectAccount",label:v("authentication.selectAccount"),rules:oe().min(1,{message:v("authentication.selectAccount")}).optional().default("vben")},{component:"VbenInput",componentProps:{placeholder:v("authentication.usernameTip")},dependencies:{trigger(l,r){if(l.selectAccount){const t=n.find(c=>c.value===l.selectAccount);t&&r.setValues({password:"123456",username:t.value})}},triggerFields:["selectAccount"]},fieldName:"username",label:v("authentication.username"),rules:oe().min(1,{message:v("authentication.usernameTip")})},{component:"VbenInputPassword",componentProps:{placeholder:v("authentication.password")},fieldName:"password",label:v("authentication.password"),rules:oe().min(1,{message:v("authentication.passwordTip")})},{component:ot(Mt),fieldName:"captcha",rules:gt().refine(l=>l,{message:v("authentication.verifyRequiredTip")})}]);return(l,r)=>(f(),b(e(Ht),{"form-schema":a.value,loading:e(o).loginLoading,onSubmit:e(o).authLogin},null,8,["form-schema","loading","onSubmit"]))}});export{io as _};
