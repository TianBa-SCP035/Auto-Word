var Qe=Object.defineProperty,Ze=Object.defineProperties;var et=Object.getOwnPropertyDescriptors;var ne=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable;var de=(s,t,o)=>t in s?Qe(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,h=(s,t)=>{for(var o in t||(t={}))ke.call(t,o)&&de(s,o,t[o]);if(ne)for(var o of ne(t))Be.call(t,o)&&de(s,o,t[o]);return s},R=(s,t)=>Ze(s,et(t));var W=(s,t)=>{var o={};for(var a in s)ke.call(s,a)&&t.indexOf(a)<0&&(o[a]=s[a]);if(s!=null&&ne)for(var a of ne(s))t.indexOf(a)<0&&Be.call(s,a)&&(o[a]=s[a]);return o};var U=(s,t,o)=>de(s,typeof t!="symbol"?t+"":t,o);var J=(s,t,o)=>new Promise((a,l)=>{var i=m=>{try{k(o.next(m))}catch(d){l(d)}},p=m=>{try{k(o.throw(m))}catch(d){l(d)}},k=m=>m.done?a(m.value):Promise.resolve(m.value).then(i,p);k((o=o.apply(s,t)).next())});import{d as le,S as Ae,aa as tt,K as ot,ab as st,w as at,ac as nt,ad as lt,P as Te,ae as rt,af as it,a0 as dt,n as ct,ag as ut,ah as pt,ai as ft,aj as mt,a2 as ht,a5 as yt,_ as _e}from"./bootstrap-DWRgxUs4.js";import{c as Y}from"./index-3wQ0-waV.js";import{a4 as A,aa as y,ab as f,a7 as e,af as gt,ag as vt,ac as g,a8 as C,R as $e,av as ue,J as z,P as x,x as X,aq as _,aw as bt,aV as V,aW as D,ad as pe,T as Ee,a9 as Ct,ao as kt,az as Bt,bx as ce,an as _t,Y as wt,bi as Mt,aB as Ot,ai as G,aj as Q,ah as we,n as fe,aF as Se,bq as xt,i as Dt,k as Me}from"../jse/index-index-CnMwTtSj.js";import{_ as At,S as Tt,c as $t}from"./use-vben-form-B20lk9tE.js";const Gt=le("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Et=le("expand",[["path",{d:"m15 15 6 6",key:"1s409w"}],["path",{d:"m15 9 6-6",key:"ko1vev"}],["path",{d:"M21 16v5h-5",key:"1ck2sf"}],["path",{d:"M21 8V3h-5",key:"1qoq8a"}],["path",{d:"M3 16v5h5",key:"1t08am"}],["path",{d:"m3 21 6-6",key:"wwnumi"}],["path",{d:"M3 8V3h5",key:"1ln10m"}],["path",{d:"M9 9 3 3",key:"v551iv"}]]);const St=le("shrink",[["path",{d:"m15 15 6 6m-6-6v4.8m0-4.8h4.8",key:"17vawe"}],["path",{d:"M9 19.8V15m0 0H4.2M9 15l-6 6",key:"chjx8e"}],["path",{d:"M15 4.2V9m0 0h4.8M15 9l6-6",key:"lav6yq"}],["path",{d:"M9 4.2V9m0 0H4.2M9 9 3 3",key:"1pxi2q"}]]);const It=le("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Lt=A({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(s,{emit:t}){const l=Ae(s,t);return(i,p)=>(f(),y(e(tt),gt(vt(e(l))),{default:g(()=>[C(i.$slots,"default")]),_:3},16))}}),Pt=["data-dismissable-modal"],zt=A({__name:"DialogOverlay",setup(s){ot();const t=$e("DISMISSABLE_MODAL_ID");return(o,a)=>(f(),ue("div",{"data-dismissable-modal":e(t),class:"bg-overlay z-popup inset-0"},null,8,Pt))}}),Ft=A({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},animationType:{default:"slide"},appendTo:{default:"body"},class:{},closeClass:{},closeDisabled:{type:Boolean,default:!1},modal:{type:Boolean},open:{type:Boolean},overlayBlur:{},showClose:{type:Boolean,default:!0},zIndex:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus","close","closed","opened"],setup(s,{expose:t,emit:o}){const a=s,l=o,i=z(()=>{const $=a,{class:r,modal:c,open:v,showClose:B,animationType:w}=$;return W($,["class","modal","open","showClose","animationType"])});function p(){return a.appendTo==="body"||a.appendTo===document.body||!a.appendTo}const k=z(()=>p()?"fixed":"absolute"),m=Ae(i,l),d=x(null);function u(r){var c;r.target===((c=d.value)==null?void 0:c.$el)&&(a.open?l("opened"):l("closed"))}return t({getContentRef:()=>d.value}),(r,c)=>(f(),y(e(st),{to:r.appendTo},{default:g(()=>[X(at,{name:"fade"},{default:g(()=>[r.open&&r.modal?(f(),y(zt,{key:0,style:bt(R(h({},r.zIndex?{zIndex:r.zIndex}:{}),{position:k.value,backdropFilter:r.overlayBlur&&r.overlayBlur>0?`blur(${r.overlayBlur}px)`:"none"})),onClick:c[0]||(c[0]=()=>l("close"))},null,8,["style"])):_("",!0)]),_:1}),X(e(lt),pe({ref_key:"contentRef",ref:d,style:R(h({},r.zIndex?{zIndex:r.zIndex}:{}),{position:k.value}),onAnimationend:u},e(m),{class:e(D)("z-popup bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 w-full p-6 shadow-lg outline-none sm:rounded-xl",{"data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-top-[48%]":r.animationType==="slide"},a.class)}),{default:g(()=>[C(r.$slots,"default"),r.showClose?(f(),y(e(nt),{key:0,disabled:r.closeDisabled,class:V(e(D)("data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:bg-accent hover:text-accent-foreground text-foreground/80 flex-center absolute right-3 top-3 h-6 w-6 rounded-full px-1 text-lg opacity-70 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none",a.closeClass)),onClick:c[1]||(c[1]=()=>l("close"))},{default:g(()=>[X(e(It),{class:"h-4 w-4"})]),_:1},8,["disabled","class"])):_("",!0)]),_:3},16,["style","class"])]),_:3},8,["to"]))}}),Oe=A({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,o=z(()=>{const p=t,{class:l}=p;return W(p,["class"])}),a=Te(o);return(l,i)=>(f(),y(e(rt),pe(e(a),{class:e(D)("text-muted-foreground text-sm",t.class)}),{default:g(()=>[C(l.$slots,"default")]),_:3},16,["class"]))}}),Rt=A({__name:"DialogFooter",props:{class:{}},setup(s){const t=s;return(o,a)=>(f(),ue("div",{class:V(e(D)("flex flex-row flex-col-reverse justify-end gap-x-2",t.class))},[C(o.$slots,"default")],2))}}),Vt=A({__name:"DialogHeader",props:{class:{}},setup(s){const t=s;return(o,a)=>(f(),ue("div",{class:V(e(D)("flex flex-col gap-y-1.5 text-center sm:text-left",t.class))},[C(o.$slots,"default")],2))}}),xe=A({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,o=z(()=>{const p=t,{class:l}=p;return W(p,["class"])}),a=Te(o);return(l,i)=>(f(),y(e(it),pe(e(a),{class:e(D)("text-lg font-semibold leading-none tracking-tight",t.class)}),{default:g(()=>[C(l.$slots,"default")]),_:3},16,["class"]))}}),Qt=Y("mdi:keyboard-esc"),Zt=Y("mdi:wechat"),eo=Y("mdi:github"),to=Y("mdi:google"),oo=Y("mdi:qqchat"),so=Y("ri:dingding-fill");function Nt(s,t,o,a){const l=Ee({offsetX:0,offsetY:0}),i=x(!1),p=u=>{const r=u.clientX,c=u.clientY;if(!s.value)return;const v=s.value.getBoundingClientRect(),{offsetX:B,offsetY:w}=l,T=v.left,$=v.top,q=v.width,Z=v.height;let S=null;if(a!=null&&a.value){const M=document.querySelector(a.value);M&&(S=M.getBoundingClientRect())}let j,K,H,I;if(S)H=S.left-T+B,j=S.right-T-q+B,I=S.top-$+w,K=S.bottom-$-Z+w;else{const M=document.documentElement,L=M.clientWidth,O=M.clientHeight;H=-T+B,I=-$+w,j=L-T-q+B,K=O-$-Z+w}const ee=M=>{let L=B+M.clientX-r,O=w+M.clientY-c;L=Math.min(Math.max(L,H),j),O=Math.min(Math.max(O,I),K),l.offsetX=L,l.offsetY=O,s.value&&(s.value.style.transform=`translate(${L}px, ${O}px)`,i.value=!0)},te=()=>{i.value=!1,document.removeEventListener("mousemove",ee),document.removeEventListener("mouseup",te)};document.addEventListener("mousemove",ee),document.addEventListener("mouseup",te)},k=()=>{const u=ce(t);u&&s.value&&u.addEventListener("mousedown",p)},m=()=>{const u=ce(t);u&&s.value&&u.removeEventListener("mousedown",p)},d=()=>{l.offsetX=0,l.offsetY=0;const u=ce(s);u&&(u.style.transform="none")};return Ct(()=>{kt(()=>{o.value?k():m()})}),Bt(()=>{m()}),{dragging:i,resetPosition:d,transform:l}}const Xt=A({__name:"modal",props:{modalApi:{default:void 0},animationType:{},appendToMain:{type:Boolean,default:!1},bordered:{type:Boolean},cancelText:{},centered:{type:Boolean},class:{},closable:{type:Boolean},closeOnClickModal:{type:Boolean},closeOnPressEscape:{type:Boolean},confirmDisabled:{type:Boolean},confirmLoading:{type:Boolean},confirmText:{},contentClass:{},description:{},destroyOnClose:{type:Boolean,default:!1},draggable:{type:Boolean},footer:{type:Boolean},footerClass:{},fullscreen:{type:Boolean},fullscreenButton:{type:Boolean},header:{type:Boolean},headerClass:{},loading:{type:Boolean},modal:{type:Boolean},openAutoFocus:{type:Boolean},overlayBlur:{},showCancelButton:{type:Boolean},showConfirmButton:{type:Boolean},submitting:{type:Boolean},title:{},titleTooltip:{},zIndex:{}},setup(s){var ae,Ce;const t=s,o=dt.getComponents(),a=x(),l=x(),i=x(),p=x(),k=x(),m=_t();Se("DISMISSABLE_MODAL_ID",m);const{$t:d}=ct(),{isMobile:u}=ut(),r=(Ce=(ae=t.modalApi)==null?void 0:ae.useStore)==null?void 0:Ce.call(ae),{appendToMain:c,bordered:v,cancelText:B,centered:w,class:T,closable:$,closeOnClickModal:q,closeOnPressEscape:Z,confirmDisabled:S,confirmLoading:j,confirmText:K,contentClass:H,description:I,destroyOnClose:ee,draggable:te,footer:M,footerClass:L,fullscreen:O,fullscreenButton:Ie,header:me,headerClass:Le,loading:he,modal:Pe,openAutoFocus:ze,overlayBlur:Fe,showCancelButton:Re,showConfirmButton:Ve,submitting:E,title:oe,titleTooltip:ye,animationType:Ne,zIndex:Xe}=pt(t,r),se=z(()=>O.value||u.value),ge=z(()=>te.value&&!se.value&&me.value),ve=z(()=>c.value?`#${ft}>div:not(.absolute)>div`:void 0),{dragging:Ye,transform:qe}=Nt(i,p,ge,ve),re=x(!1),ie=x(!0);wt(()=>{var n;return(n=r==null?void 0:r.value)==null?void 0:n.isOpen},n=>J(null,null,function*(){if(n){if(ie.value=!1,re.value||(re.value=!0),yield fe(),!a.value)return;const b=a.value.getContentRef();i.value=b.$el;const{offsetX:N,offsetY:F}=qe;i.value.style.transform=`translate(${N}px, ${F}px)`}}),{immediate:!0}),Mt(()=>{var n;c.value||(n=t.modalApi)==null||n.close()});function je(){var n;(n=t.modalApi)==null||n.setState(b=>R(h({},b),{fullscreen:!O.value}))}function Ke(n){(!q.value||E.value)&&(n.preventDefault(),n.stopPropagation())}function He(n){(!Z.value||E.value)&&n.preventDefault()}function We(n){ze.value||n==null||n.preventDefault()}function Ue(n){const b=n.target,N=b==null?void 0:b.dataset.dismissableModal;(!q.value||N!==m||E.value)&&(n.preventDefault(),n.stopPropagation())}function be(n){n.preventDefault(),n.stopPropagation()}const Je=z(()=>!e(ee)&&e(re));function Ge(){var n;ie.value=!0,(n=t.modalApi)==null||n.onClosed()}return(n,b)=>{var N;return f(),y(e(Lt),{modal:!1,open:(N=e(r))==null?void 0:N.isOpen,"onUpdate:open":b[3]||(b[3]=()=>{var F;return e(E)||(F=n.modalApi)==null?void 0:F.close()})},{default:g(()=>{var F;return[X(e(Ft),{ref_key:"contentRef",ref:a,"append-to":ve.value,class:V(e(D)("left-0 right-0 top-[10vh] mx-auto flex max-h-[80%] w-[520px] flex-col p-0",se.value?"sm:rounded-none":"sm:rounded-[var(--radius)]",e(T),{"border-border border":e(v),"shadow-3xl":!e(v),"left-0 top-0 size-full max-h-full !translate-x-0 !translate-y-0":se.value,"top-1/2 !-translate-y-1/2":e(w)&&!se.value,"duration-300":!e(Ye),hidden:ie.value})),"force-mount":Je.value,modal:e(Pe),open:(F=e(r))==null?void 0:F.isOpen,"show-close":e($),"animation-type":e(Ne),"z-index":e(Xe),"overlay-blur":e(Fe),"close-class":"top-3",onCloseAutoFocus:be,onClosed:Ge,"close-disabled":e(E),onEscapeKeyDown:He,onFocusOutside:be,onInteractOutside:Ke,onOpenAutoFocus:We,onOpened:b[2]||(b[2]=()=>{var P;return(P=n.modalApi)==null?void 0:P.onOpened()}),onPointerDownOutside:Ue},{default:g(()=>[X(e(Vt),{ref_key:"headerRef",ref:p,class:V(e(D)("px-5 py-4",{"border-b":e(v),hidden:!e(me),"cursor-move select-none":ge.value},e(Le)))},{default:g(()=>[e(oe)?(f(),y(e(xe),{key:0,class:"text-left"},{default:g(()=>[C(n.$slots,"title",{},()=>[G(Q(e(oe))+" ",1),e(ye)?C(n.$slots,"titleTooltip",{key:0},()=>[X(e(At),{"trigger-class":"pb-1"},{default:g(()=>[G(Q(e(ye)),1)]),_:1})]):_("",!0)])]),_:3})):_("",!0),e(I)?(f(),y(e(Oe),{key:1},{default:g(()=>[C(n.$slots,"description",{},()=>[G(Q(e(I)),1)])]),_:3})):_("",!0),!e(oe)||!e(I)?(f(),y(e(mt),{key:2},{default:g(()=>[e(oe)?_("",!0):(f(),y(e(xe),{key:0})),e(I)?_("",!0):(f(),y(e(Oe),{key:1}))]),_:1})):_("",!0)]),_:3},8,["class"]),Ot("div",{ref_key:"wrapperRef",ref:l,class:V(e(D)("relative min-h-40 flex-1 overflow-y-auto p-3",e(H),{"pointer-events-none":e(he)||e(E)}))},[C(n.$slots,"default")],2),e(he)||e(E)?(f(),y(e(ht),{key:0,spinning:""})):_("",!0),e(Ie)?(f(),y(e(yt),{key:1,class:"hover:bg-accent hover:text-accent-foreground text-foreground/80 flex-center absolute right-10 top-3 hidden size-6 rounded-full px-1 text-lg opacity-70 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none sm:block",onClick:je},{default:g(()=>[e(O)?(f(),y(e(St),{key:0,class:"size-3.5"})):(f(),y(e(Et),{key:1,class:"size-3.5"}))]),_:1})):_("",!0),e(M)?(f(),y(e(Rt),{key:2,ref_key:"footerRef",ref:k,class:V(e(D)("flex-row items-center justify-end p-2",{"border-t":e(v)},e(L)))},{default:g(()=>[C(n.$slots,"prepend-footer"),C(n.$slots,"footer",{},()=>[e(Re)?(f(),y(we(e(o).DefaultButton||e(_e)),{key:0,variant:"ghost",disabled:e(E),onClick:b[0]||(b[0]=()=>{var P;return(P=n.modalApi)==null?void 0:P.onCancel()})},{default:g(()=>[C(n.$slots,"cancelText",{},()=>[G(Q(e(B)||e(d)("cancel")),1)])]),_:3},8,["disabled"])):_("",!0),C(n.$slots,"center-footer"),e(Ve)?(f(),y(we(e(o).PrimaryButton||e(_e)),{key:1,disabled:e(S),loading:e(j)||e(E),onClick:b[1]||(b[1]=()=>{var P;return(P=n.modalApi)==null?void 0:P.onConfirm()})},{default:g(()=>[C(n.$slots,"confirmText",{},()=>[G(Q(e(K)||e(d)("confirm")),1)])]),_:3},8,["disabled","loading"])):_("",!0)]),C(n.$slots,"append-footer")]),_:3},8,["class"])):_("",!0)]),_:3},8,["append-to","class","force-mount","modal","open","show-close","animation-type","z-index","overlay-blur","close-disabled"])]}),_:3},8,["open"])}}});class Yt{constructor(t={}){U(this,"sharedData",{payload:{}});U(this,"store");U(this,"api");U(this,"state");const r=t,{connectedComponent:o,onBeforeClose:a,onCancel:l,onClosed:i,onConfirm:p,onOpenChange:k,onOpened:m}=r,d=W(r,["connectedComponent","onBeforeClose","onCancel","onClosed","onConfirm","onOpenChange","onOpened"]),u={bordered:!0,centered:!1,class:"",closeOnClickModal:!0,closeOnPressEscape:!0,confirmDisabled:!1,confirmLoading:!1,contentClass:"",destroyOnClose:!0,draggable:!1,footer:!0,footerClass:"",fullscreen:!1,fullscreenButton:!0,header:!0,headerClass:"",isOpen:!1,loading:!1,modal:!0,openAutoFocus:!1,showCancelButton:!0,showConfirmButton:!0,title:"",animationType:"slide"};this.store=new Tt(h(h({},u),d),{onUpdate:()=>{var v,B,w;const c=this.store.state;(c==null?void 0:c.isOpen)===((v=this.state)==null?void 0:v.isOpen)?this.state=c:(this.state=c,(w=(B=this.api).onOpenChange)==null||w.call(B,!!(c!=null&&c.isOpen)))}}),this.state=this.store.state,this.api={onBeforeClose:a,onCancel:l,onClosed:i,onConfirm:p,onOpenChange:k,onOpened:m},xt(this)}close(){return J(this,null,function*(){var o,a,l;((l=yield(a=(o=this.api).onBeforeClose)==null?void 0:a.call(o))!=null?l:!0)&&this.store.setState(i=>R(h({},i),{isOpen:!1,submitting:!1}))})}getData(){var t,o;return(o=(t=this.sharedData)==null?void 0:t.payload)!=null?o:{}}lock(t=!0){return this.setState({submitting:t})}onCancel(){var t,o;this.api.onCancel?(o=(t=this.api).onCancel)==null||o.call(t):this.close()}onClosed(){var t,o;this.state.isOpen||(o=(t=this.api).onClosed)==null||o.call(t)}onConfirm(){var t,o;(o=(t=this.api).onConfirm)==null||o.call(t)}onOpened(){var t,o;this.state.isOpen&&((o=(t=this.api).onOpened)==null||o.call(t))}open(){this.store.setState(t=>R(h({},t),{isOpen:!0}))}setData(t){return this.sharedData.payload=t,this}setState(t){return Dt(t)?this.store.setState(t):this.store.setState(o=>h(h({},o),t)),this}unlock(){return this.lock(!1)}}const De=Symbol("VBEN_MODAL_INJECT"),qt={};function ao(s={}){var m;const{connectedComponent:t}=s;if(t){const d=Ee({}),u=x(!0);return[A((c,{attrs:v,slots:B})=>(Se(De,{extendApi(T){Object.setPrototypeOf(d,T)},options:s,reCreateModal(){return J(this,null,function*(){u.value=!1,yield fe(),u.value=!0})}}),jt(d,h(h(h({},c),v),B)),()=>Me(u.value?t:"div",h(h({},c),v),B)),{name:"VbenParentModal",inheritAttrs:!1}),d]}const o=$e(De,{}),a=h(h(h({},qt),o.options),s);a.onOpenChange=d=>{var u,r,c;(u=s.onOpenChange)==null||u.call(s,d),(c=(r=o.options)==null?void 0:r.onOpenChange)==null||c.call(r,d)};const l=a.onClosed;a.onClosed=()=>{var d;l==null||l(),a.destroyOnClose&&((d=o.reCreateModal)==null||d.call(o))};const i=new Yt(a),p=i;p.useStore=d=>$t(i.store,d);const k=A((d,{attrs:u,slots:r})=>()=>Me(Xt,R(h(h({},d),u),{modalApi:p}),r),{name:"VbenModal",inheritAttrs:!1});return(m=o.extendApi)==null||m.call(o,p),[k,p]}function jt(s,t){return J(this,null,function*(){var l;if(!t||Object.keys(t).length===0)return;yield fe();const o=(l=s==null?void 0:s.store)==null?void 0:l.state;if(!o)return;const a=new Set(Object.keys(o));for(const i of Object.keys(t))a.has(i)&&!["class"].includes(i)&&console.warn(`[Vben Modal]: When 'connectedComponent' exists, do not set props or slots '${i}', which will increase complexity. If you need to modify the props of Modal, please use useVbenModal or api.`)})}export{Gt as C,Zt as M,so as R,It as X,oo as a,eo as b,to as c,Qt as d,ao as u};
